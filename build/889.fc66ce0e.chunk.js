(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[889],{1107:(y,j,t)=>{var n=t(84856),l=t(52593),g=l(n);y.exports=g},92403:(y,j,t)=>{var n=t(1107),l=t(47727);function g(u,p){var r=-1,d=l(u)?Array(u.length):[];return n(u,function(c,v,O){d[++r]=p(c,v,O)}),d}y.exports=g},16429:(y,j,t)=>{var n=t(36393),l=t(82393),g=t(90040),u=t(92403),p=t(63135),r=t(20435),d=t(9998),c=t(51339),v=t(26126);function O(P,x,M){x.length?x=n(x,function(D){return v(D)?function(T){return l(T,D.length===1?D[0]:D)}:D}):x=[c];var K=-1;x=n(x,r(g));var R=u(P,function(D,T,W){var F=n(x,function(G){return G(D)});return{criteria:F,index:++K,value:D}});return p(R,function(D,T){return d(D,T,M)})}y.exports=O},63135:y=>{function j(t,n){var l=t.length;for(t.sort(n);l--;)t[l]=t[l].value;return t}y.exports=j},17654:(y,j,t)=>{var n=t(85194);function l(g,u){if(g!==u){var p=g!==void 0,r=g===null,d=g===g,c=n(g),v=u!==void 0,O=u===null,P=u===u,x=n(u);if(!O&&!x&&!c&&g>u||c&&v&&P&&!O&&!x||r&&v&&P||!p&&P||!d)return 1;if(!r&&!c&&!x&&g<u||x&&p&&d&&!r&&!c||O&&p&&d||!v&&d||!P)return-1}return 0}y.exports=l},9998:(y,j,t)=>{var n=t(17654);function l(g,u,p){for(var r=-1,d=g.criteria,c=u.criteria,v=d.length,O=p.length;++r<v;){var P=n(d[r],c[r]);if(P){if(r>=O)return P;var x=p[r];return P*(x=="desc"?-1:1)}}return g.index-u.index}y.exports=l},52593:(y,j,t)=>{var n=t(47727);function l(g,u){return function(p,r){if(p==null)return p;if(!n(p))return g(p,r);for(var d=p.length,c=u?d:-1,v=Object(p);(u?c--:++c<d)&&r(v[c],c,v)!==!1;);return p}}y.exports=l},8243:(y,j,t)=>{var n=t(93367),l=t(16429),g=t(52431),u=t(65145),p=g(function(r,d){if(r==null)return[];var c=d.length;return c>1&&u(r,d[0],d[1])?d=[]:c>2&&u(d[0],d[1],d[2])&&(d=[d[0]]),l(r,n(d,1),[])});y.exports=p},50889:(y,j,t)=>{"use strict";t.r(j),t.d(j,{SettingsPage:()=>xn});var n=t(74081),l=t(27279),g=t(57074),u=t(81565),p=t(37386),r=t(78565),d=t(92602),c=t(52185),v=t(35090),O=t(85898),P=t(51413),x=t(45804),M=t(3785),K=t(19098),R=t(12826),D=t(87161),T=t(67393),W=t(33832),F=t(10956),G=t(72155),Y=t(21350),k=t(77924),ot=t(35884),J=t(28510),et=t(62799),_=t(16740),at=t(10306),it=t(2667),mt=t(40333),b=t(90529),V=t(49899),gt=t(1296),pt=t(796),ht=t(62475),Et=t(34041),Q=t(49969),Ct=t(33774),I=t(94486),Ft=t(364),N=t(61020),lt=t(51447),Zt=t(47533),X=t(36582),$t=t(8243),jt=t(59461),yt=t(91687),Nt=t(86353),Gt=t(30734),Ht=t(2239),Vt=t(63490),Qt=t(38433),Jt=t(14063),Xt=t(39706),Yt=t(25659),_t=t(69),bt=t(82943),Rt=t(34120),e=t(70627),Tt=t(14094),At=t(40464),xt=t(61815),wt=t(87830),Mn=t(15816),fn=t(97442),On=t(13576),Pn=t(47184),vn=t(71563),Dn=t(49204),Ln=t(47853),Cn=t(75719),jn=t(74919),yn=t(29206),Rn=t(98934),Tn=t(43433),An=t(64797),Bn=t(85811),Un=t(8175);const kt=o=>o.map(s=>{const i=s.links.map(a=>({...a,isDisplayed:!1}));return{...s,links:i}}),qt=()=>{const[{isLoading:o,menu:s},i]=l.useState({isLoading:!0,menu:[]}),{allPermissions:a}=(0,I.vn)(),{shouldUpdateStrapi:h}=(0,I.L7)(),{settings:L}=(0,I.j1)(),A=(0,jt.v9)(yt.s),C=l.useMemo(()=>(0,X.Q)(),[]),{admin:E,global:m}=(0,X.p)(C,async()=>(await t.e(5146).then(t.bind(t,75146))).SETTINGS_LINKS_EE(),{combine(f,S){return{admin:[...S.admin,...f.admin],global:[...f.global,...S.global]}},defaultValue:{admin:[],global:[]}}),U=l.useCallback(f=>{if(!f.id)throw new Error("The settings menu item must have an id attribute.");return{...f,permissions:A.settings?.[f.id]?.main??[]}},[A.settings]);return l.useEffect(()=>{const f=async()=>{const H=await(tt=>Promise.all(tt.reduce((nt,dt,ct)=>{const B=dt.links.map(async(st,w)=>({hasPermission:await(0,I.qX)(a,st.permissions),sectionIndex:ct,linkIndex:w}));return[...nt,...B]},[])))($);i(tt=>({...tt,isLoading:!1,menu:$.map((nt,dt)=>({...nt,links:nt.links.map((ct,B)=>{const st=H.find(w=>w.sectionIndex===dt&&w.linkIndex===B);return{...ct,isDisplayed:Boolean(st?.hasPermission)}})}))}))},{global:S,...Z}=L,$=kt([{...S,links:$t([...S.links,...m.map(U)],z=>z.id).map(z=>({...z,hasNotification:z.id==="000-application-infos"&&h}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:E.map(U)},...Object.values(Z)]);f()},[E,m,a,L,h,U]),{isLoading:o,menu:s.map(f=>({...f,links:f.links.filter(S=>S.isDisplayed)}))}},tn=(0,Tt.default)(g.J)`
  right: 15px;
  position: absolute;
`,Bt=({menu:o})=>{const{formatMessage:s}=(0,N.Z)(),{trackUsage:i}=(0,I.rS)(),{pathname:a}=(0,lt.TH)(),L=o.filter(E=>!E.links.every(m=>m.isDisplayed===!1)).map(E=>({...E,title:E.intlLabel,links:E.links.map(m=>({...m,title:m.intlLabel,name:m.id}))})),A=s({id:"global.settings",defaultMessage:"Settings"}),C=(E=null)=>{i("willNavigate",{from:a,to:E})};return(0,n.jsxs)(Nt.m,{ariaLabel:A,children:[(0,n.jsx)(Gt.p,{label:A}),(0,n.jsx)(Ht.Z,{children:L.map(E=>(0,n.jsx)(Vt.D,{label:s(E.intlLabel),children:E.links.map(m=>(0,n.jsxs)(Qt.E,{as:Zt.OL,withBullet:m.hasNotification,to:m.to,onClick:()=>C(m.to),children:[s(m.intlLabel),m?.lockIcon&&(0,n.jsx)(tn,{width:`${15/16}rem`,height:`${15/16}rem`,as:Jt.Z})]},m.id))},E.id))})]})};Bt.propTypes={menu:e.array.isRequired};const nn=[{async Component(){return await t.e(3420).then(t.bind(t,43420))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(998),t.e(8902),t.e(3352)]).then(t.bind(t,13352))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(998),t.e(8902),t.e(3352)]).then(t.bind(t,13352))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(8902),t.e(174)]).then(t.bind(t,45729))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(8075).then(t.bind(t,48075)).then(s=>s.i)},to:"/settings/users",exact:!0},{async Component(){return await t.e(9749).then(t.bind(t,69749))},to:"/settings/users/:id",exact:!0},{async Component(){return await Promise.all([t.e(1920),t.e(2345)]).then(t.bind(t,62345))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await Promise.all([t.e(1920),t.e(2822)]).then(t.bind(t,82822))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(4429).then(t.bind(t,84429))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(7519).then(t.bind(t,97519))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(998),t.e(6094),t.e(5476),t.e(6975)]).then(t.bind(t,56975))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(998),t.e(6094),t.e(5476),t.e(2940)]).then(t.bind(t,2940))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(998),t.e(6094),t.e(1813)]).then(t.bind(t,81813))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(5574).then(t.bind(t,75574))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(998),t.e(6094),t.e(5084)]).then(t.bind(t,15084))},to:"/settings/transfer-tokens/:id",exact:!0},{async Component(){return await t.e(816).then(t.bind(t,816))},to:"/settings/purchase-audit-logs",exact:!0},{async Component(){return await t.e(3674).then(t.bind(t,33674))},to:"/settings/purchase-review-workflows",exact:!0},{async Component(){return await t.e(4456).then(t.bind(t,84456))},to:"/settings/purchase-single-sign-on",exact:!0}],q=750,rt=100,Ut=["image/jpeg","image/png","image/svg+xml"],It={localImage:void 0},sn=(o=It,s)=>(0,xt.ZP)(o,i=>{switch(s.type){case"SET_LOCAL_IMAGE":{i.localImage=s.value;break}default:return i}}),Mt=({onChangeLogo:o,customLogo:s,goTo:i,Component:a,modalTitle:h,next:L,prev:A,currentStep:C})=>{const[{localImage:E},m]=(0,l.useReducer)(sn,It),{formatMessage:U}=(0,N.Z)(),f=Z=>{m({type:"SET_LOCAL_IMAGE",value:Z})},S=()=>{i(null)};return C?(0,n.jsxs)(u.P,{labelledBy:"modal",onClose:S,children:[(0,n.jsx)(p.x,{children:(0,n.jsx)(r.Z,{fontWeight:"bold",as:"h2",id:"modal",children:U(h)})}),(0,n.jsx)(a,{setLocalImage:f,goTo:i,next:L,prev:A,onClose:S,asset:E||s,onChangeLogo:o})]}):null};Mt.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},Mt.propTypes={Component:e.elementType,currentStep:e.string,customLogo:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}),goTo:e.func.isRequired,modalTitle:e.shape({id:e.string,defaultMessage:e.string}),next:e.string,onChangeLogo:e.func.isRequired,prev:e.string};const St={currentStep:void 0},on=(o=St,s)=>(0,xt.ZP)(o,i=>{switch(s.type){case"GO_TO":{i.currentStep=s.to;break}default:return i}}),en={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Wt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},an=o=>new Promise(s=>{const i=new FileReader;i.onload=()=>{const a=new Image;a.onload=function(){s({width:a.width,height:a.height})},a.src=i.result},i.readAsDataURL(o)}),ln=(o,s)=>({ext:o.name.split(".").pop(),size:o.size/1e3,name:o.name,url:URL.createObjectURL(o),rawFile:o,width:s.width,height:s.height}),Kt=async o=>{let s;if(!Ut.includes(o.type))throw s=new Error("File format"),s.displayMessage=en,s;const a=await an(o);if(!(a.width<=q&&a.height<=q))throw s=new Error("File sizing"),s.displayMessage=Wt,s;const L=ln(o,a);if(!(L.size<=rt))throw s=new Error("File sizing"),s.displayMessage=Wt,s;return L},rn=(0,Tt.default)(d._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,ft=({setLocalImage:o,goTo:s,next:i,onClose:a})=>{const{formatMessage:h}=(0,N.Z)(),[L,A]=(0,l.useState)(!1),[C,E]=(0,l.useState)(void 0),m=(0,l.useRef)(null),U=()=>A(!0),f=()=>A(!1),S=z=>{z.preventDefault(),m.current.click()},Z=async()=>{f();const z=m.current.files[0];if(z)try{const H=await Kt(z);o(H),s(i)}catch(H){if(H.displayMessage)E(h(H.displayMessage,{size:rt,dimension:q})),m.current.focus();else throw H}},$=()=>L?"primary500":C?"danger600":"neutral300";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{children:(0,n.jsx)(c.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(v.g,{name:"logo-upload",error:C,children:(0,n.jsx)("label",{htmlFor:"logo-upload",children:(0,n.jsxs)(O.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,n.jsxs)(O.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:L?"primary100":"neutral100",borderColor:$(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:U,onDragLeave:f,children:[(0,n.jsx)(g.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Xt.Z,"aria-hidden":!0}),(0,n.jsx)(c.x,{paddingTop:3,paddingBottom:5,children:(0,n.jsx)(r.Z,{variant:"delta",as:"span",children:h({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"})})}),(0,n.jsx)(rn,{accept:Ut,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:Z,ref:m,id:"logo-upload"}),(0,n.jsx)(P.z,{type:"button",onClick:S,children:h({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})}),(0,n.jsx)(c.x,{paddingTop:6,children:(0,n.jsx)(r.Z,{variant:"pi",textColor:"neutral600",children:h({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:rt,dimension:q})})})]}),(0,n.jsx)(x.c,{})]})})})})}),(0,n.jsx)(M.m,{startActions:(0,n.jsx)(P.z,{onClick:a,variant:"tertiary",children:h({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})})})]})};ft.defaultProps={next:null},ft.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const dn=async o=>{try{const{get:s}=(0,I.tg)(),i=await s(o,{responseType:"blob",timeout:8e3});return new File([i.data],i.config.url,{type:i.headers["content-type"]})}catch(s){throw s.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},s}},Ot=({goTo:o,next:s,onClose:i,setLocalImage:a})=>{const{formatMessage:h}=(0,N.Z)(),[L,A]=(0,l.useState)(""),[C,E]=(0,l.useState)(null),m=f=>{A(f.target.value)},U=async()=>{try{const f=await dn(L),S=await Kt(f);a(S),o(s)}catch(f){if(f.displayMessage)E(h(f.displayMessage,{size:rt,dimension:q}));else throw f}};return(0,n.jsxs)("form",{onSubmit:f=>{f.preventDefault(),U()},children:[(0,n.jsx)(c.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(K.o,{label:h({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:C,onChange:m,value:L,name:"logo-url"})}),(0,n.jsx)(M.m,{startActions:(0,n.jsx)(P.z,{onClick:i,variant:"tertiary",children:h({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(P.z,{type:"submit",children:h({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"})})})]})};Ot.defaultProps={next:null},Ot.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const Pt=({setLocalImage:o,goTo:s,next:i,onClose:a})=>{const{formatMessage:h}=(0,N.Z)();return(0,n.jsxs)(R.v,{label:h({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple",children:[(0,n.jsxs)(c.x,{paddingLeft:8,paddingRight:8,children:[(0,n.jsxs)(D.m,{children:[(0,n.jsx)(D.O,{children:h({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})}),(0,n.jsx)(D.O,{children:h({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"})})]}),(0,n.jsx)(T.i,{})]}),(0,n.jsxs)(W.n,{children:[(0,n.jsx)(W.x,{children:(0,n.jsx)(ft,{onClose:a,setLocalImage:o,goTo:s,next:i})}),(0,n.jsx)(W.x,{children:(0,n.jsx)(Ot,{onClose:a,setLocalImage:o,goTo:s,next:i})})]})]})};Pt.defaultProps={next:null},Pt.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const zt=({asset:o})=>{const{formatMessage:s}=(0,N.Z)();return(0,n.jsxs)(F.Z,{children:[(0,n.jsx)(G.O,{children:(0,n.jsx)(Y.H,{size:"S",src:o.url})}),(0,n.jsxs)(k.e,{children:[(0,n.jsxs)(ot.a,{children:[(0,n.jsx)(J.l,{children:o.name}),(0,n.jsx)(J._,{children:`${o.ext.toUpperCase()} - ${o.width}\u2715${o.height}`})]}),(0,n.jsx)(et.E,{children:s({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"})})]})]})};zt.propTypes={asset:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}).isRequired};const vt=({onClose:o,asset:s,prev:i,next:a,goTo:h,setLocalImage:L,onChangeLogo:A})=>{const{formatMessage:C}=(0,N.Z)(),E=()=>{L(void 0),h(i)},m=()=>{A(s),h(a)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:[(0,n.jsxs)(O.k,{justifyContent:"space-between",paddingBottom:6,children:[(0,n.jsxs)(O.k,{direction:"column",alignItems:"flex-start",children:[(0,n.jsx)(r.Z,{variant:"pi",fontWeight:"bold",children:C({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})}),(0,n.jsx)(r.Z,{variant:"pi",textColor:"neutral500",children:C({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"})})]}),(0,n.jsx)(P.z,{onClick:E,variant:"secondary",children:C({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"})})]}),(0,n.jsx)(c.x,{maxWidth:(0,I.Q1)(180),children:s.url?(0,n.jsx)(zt,{asset:s}):null})]}),(0,n.jsx)(M.m,{startActions:(0,n.jsx)(P.z,{onClick:o,variant:"tertiary",children:C({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(P.z,{onClick:m,children:C({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"})})})]})};vt.defaultProps={next:null,prev:null},vt.propTypes={goTo:e.func.isRequired,asset:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}).isRequired,next:e.string,onClose:e.func.isRequired,onChangeLogo:e.func.isRequired,prev:e.string,setLocalImage:e.func.isRequired};const cn={upload:{Component:Pt,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:vt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},ut=({canUpdate:o,customLogo:s,defaultLogo:i,hint:a,label:h,onChangeLogo:L,onResetLogo:A})=>{const[{currentStep:C},E]=(0,l.useReducer)(on,St),{Component:m,next:U,prev:f,modalTitle:S}=cn[C]||{},{formatMessage:Z}=(0,N.Z)(),$=z=>{E({type:"GO_TO",to:z})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.F,{label:h,selectedSlide:0,hint:a,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:s?.name||"logo.png",actions:(0,n.jsxs)(at.b,{children:[(0,n.jsx)(it.h,{disabled:!o,onClick:()=>$(s?"pending":"upload"),label:Z({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:(0,n.jsx)(Yt.Z,{})}),s&&(0,n.jsx)(it.h,{disabled:!o,onClick:A,label:Z({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:(0,n.jsx)(_t.Z,{})})]}),children:(0,n.jsx)(mt.q,{label:Z({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"}),children:(0,n.jsx)(c.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:s?.url||i,alt:Z({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})})})}),(0,n.jsx)(Mt,{Component:m,currentStep:C,onChangeLogo:L,customLogo:s,goTo:$,next:U,prev:f,modalTitle:S})]})};ut.defaultProps={canUpdate:!1,customLogo:null,hint:null},ut.propTypes={canUpdate:e.bool,customLogo:e.shape({url:e.string,name:e.string}),label:e.string.isRequired,hint:e.string,defaultLogo:e.string.isRequired,onChangeLogo:e.func.isRequired,onResetLogo:e.func.isRequired};const gn=(o,s)=>wt(o,{menuLogo:{display:s.menuLogo},authLogo:{display:s.authLogo}}),Dt={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},un=(o=Dt,s)=>(0,xt.ZP)(o,i=>{switch(s.type){case"SET_CUSTOM_MENU_LOGO":{i.menuLogo.display=s.value,i.menuLogo.submit.rawFile=s.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{i.authLogo.display=s.value,i.authLogo.submit.rawFile=s.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{i.menuLogo.display=null,i.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{i.authLogo.display=null,i.authLogo.submit={rawFile:null,isReset:!0};break}default:return i}}),Lt=(0,l.forwardRef)(({canUpdate:o,projectSettingsStored:s},i)=>{const{formatMessage:a}=(0,N.Z)(),{trackUsage:h}=(0,I.rS)(),{logos:{menu:L,auth:A}}=(0,X.u)(),[{menuLogo:C,authLogo:E},m]=(0,l.useReducer)(un,Dt,()=>gn(Dt,s)),U=$=>{m({type:"SET_CUSTOM_MENU_LOGO",value:$})},f=()=>{h("didClickResetLogo",{logo:"menu"}),m({type:"RESET_CUSTOM_MENU_LOGO"})},S=$=>{m({type:"SET_CUSTOM_AUTH_LOGO",value:$})},Z=()=>{h("didClickResetLogo",{logo:"auth"}),m({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,l.useImperativeHandle)(i,()=>({getValues:()=>({menuLogo:C.submit,authLogo:E.submit})})),(0,n.jsxs)(c.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(r.Z,{variant:"delta",as:"h3",children:a({id:"Settings.application.customization",defaultMessage:"Customization"})}),(0,n.jsx)(r.Z,{variant:"pi",textColor:"neutral600",children:a({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:q,size:rt})}),(0,n.jsxs)(b.r,{paddingTop:4,gap:4,children:[(0,n.jsx)(V.P,{col:6,s:12,children:(0,n.jsx)(ut,{canUpdate:o,customLogo:C.display,defaultLogo:L.default,hint:a({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:a({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:U,onResetLogo:f})}),(0,n.jsx)(V.P,{col:6,s:12,children:(0,n.jsx)(ut,{canUpdate:o,customLogo:E.display,defaultLogo:A.default,hint:a({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:a({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:S,onResetLogo:Z})})]})]})});Lt.defaultProps={canUpdate:!1,projectSettingsStored:null},Lt.propTypes={canUpdate:e.bool,projectSettingsStored:e.shape({menuLogo:e.shape({url:e.string,name:e.string})})};const mn=o=>{const s=new FormData;return Object.entries(o).forEach(([i,a])=>{a&&a.rawFile instanceof File&&s.append(i,a.rawFile),a&&a.isReset&&s.append(i,null)}),s},pn=()=>null,hn=()=>{const o=l.useRef(),s=(0,I.lm)(),{trackUsage:i}=(0,I.rS)(),{formatMessage:a}=(0,N.Z)(),{get:h,post:L}=(0,I.kY)(),{updateProjectSettings:A}=(0,X.u)(),C=(0,jt.v9)(yt.s),{formatAPIError:E}=(0,I.So)(),{communityEdition:m,latestStrapiReleaseTag:U,nodeVersion:f,shouldUpdateStrapi:S,strapiVersion:Z}=(0,I.L7)(),$=(0,X.p)(pn,async()=>(await t.e(4060).then(t.bind(t,64060))).AdminSeatInfoEE),{allowedActions:{canRead:z,canUpdate:H}}=(0,I.ss)(C.settings["project-settings"]);(0,I.go)();const{data:tt,isLoading:nt}=(0,At.useQuery)(["project-settings"],async()=>{const{data:B}=await h("/admin/project-settings");return B},{cacheTime:0,enabled:z,select(B){return{...B,authLogo:B.authLogo?{...B.authLogo,url:(0,I.CR)(B.authLogo.url)}:B.authLogo,menuLogo:B.menuLogo?{...B.menuLogo,url:(0,I.CR)(B.menuLogo.url)}:B.menuLogo}}}),dt=(0,At.useMutation)(B=>L("/admin/project-settings",B,{headers:{"Content-Type":"multipart/form-data"}}),{onError(B){s({type:"warning",message:E(B)})},async onSuccess(B){const{menuLogo:st,authLogo:w}=B;A({menuLogo:st?.url,authLogo:w?.url}),st?.rawFile&&i("didChangeLogo",{logo:"menu"}),w?.rawFile&&i("didChangeLogo",{logo:"auth"}),s({type:"success",message:a({id:"app",defaultMessage:"Saved"})})}}),ct=B=>{B.preventDefault(),dt.mutate(mn(o.current.getValues()))};return $?(0,n.jsxs)(gt.A,{children:[(0,n.jsx)(I.SL,{name:"Application"}),(0,n.jsx)(pt.o,{children:nt?(0,n.jsx)(ht.a,{children:a({id:"Settings.application.isLoading",defaultMessage:"Loading"})}):(0,n.jsxs)("form",{onSubmit:ct,children:[(0,n.jsx)(Et.T,{title:a({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:a({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:H&&(0,n.jsx)(P.z,{type:"submit",startIcon:(0,n.jsx)(bt.Z,{}),children:a({id:"global.save",defaultMessage:"Save"})})}),(0,n.jsx)(Q.D,{children:(0,n.jsxs)(O.k,{direction:"column",alignItems:"stretch",gap:6,children:[(0,n.jsxs)(O.k,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(r.Z,{variant:"delta",as:"h3",children:a({id:"global.details",defaultMessage:"Details"})}),(0,n.jsxs)(b.r,{gap:5,as:"dl",children:[(0,n.jsxs)(V.P,{col:6,s:12,children:[(0,n.jsx)(r.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})}),(0,n.jsxs)(O.k,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsxs)(r.Z,{children:["v",Z]}),S&&(0,n.jsx)(Ct.r,{href:`https://github.com/strapi/strapi/releases/tag/${U}`,isExternal:!0,endIcon:(0,n.jsx)(Rt.Z,{}),children:a({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})})]})]}),(0,n.jsxs)(V.P,{col:6,s:12,children:[(0,n.jsx)(r.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.edition-title",defaultMessage:"current plan"})}),(0,n.jsxs)(O.k,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsx)(r.Z,{children:a({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:m})}),(0,n.jsx)(Ct.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:(0,n.jsx)(Rt.Z,{}),children:a({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})})]})]}),(0,n.jsxs)(V.P,{col:6,s:12,children:[(0,n.jsx)(r.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.node-version",defaultMessage:"node version"})}),(0,n.jsx)(r.Z,{as:"dd",children:f})]}),(0,n.jsx)($,{})]})]}),z&&tt&&(0,n.jsx)(Lt,{canUpdate:H,ref:o,projectSettingsStored:tt})]})})]})})]}):null};function En(o){return o.filter((s,i,a)=>a.findIndex(h=>h.key===s.key)===i)}function xn(){const{settingId:o}=(0,lt.UO)(),{settings:s}=(0,I.j1)(),{formatMessage:i}=(0,N.Z)(),{isLoading:a,menu:h}=qt(),L=(0,X.p)(nn,async()=>(await t.e(604).then(t.bind(t,90604))).ROUTES_EE,{combine(E,m){return[...E,...m]},defaultValue:[]}),A=l.useMemo(()=>En(L.map(({to:E,Component:m,exact:U})=>(0,X.d)(m,E,U))),[L]),C=Object.values(s).flatMap(E=>{const{links:m}=E;return m.map(U=>(0,X.d)(U.Component,U.to,U.exact||!1))});return a?(0,n.jsx)(I.dO,{}):o?(0,n.jsxs)(gt.A,{sideNav:(0,n.jsx)(Bt,{menu:h}),children:[(0,n.jsx)(Ft.q,{title:i({id:"global.settings",defaultMessage:"Settings"})}),(0,n.jsxs)(lt.rs,{children:[(0,n.jsx)(lt.AW,{path:"/settings/application-infos",component:hn,exact:!0}),A,C]})]}):(0,n.jsx)(lt.l_,{to:"/settings/application-infos"})}},1296:(y,j,t)=>{"use strict";t.d(j,{A:()=>r});var n=t(74081),l=t(14094),g=t(52185);const u=(0,l.default)(g.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:d})=>d?"auto 1fr":"1fr"};
`,p=(0,l.default)(g.x)`
  overflow-x: hidden;
`,r=({sideNav:d,children:c})=>(0,n.jsxs)(u,{hasSideNav:Boolean(d),children:[d,(0,n.jsx)(p,{paddingBottom:10,children:c})]})},33774:(y,j,t)=>{"use strict";t.d(j,{r:()=>P});var n=t(74081),l=t(27279),g=t(34120),u=t(47533),p=t(14094),r=t(97069),d=t(78565),c=t(52185);const v=p.default.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:x})=>x?"none":void 0};
  color: ${({disabled:x,theme:M})=>x?M.colors.neutral600:M.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${d.Z} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:x})=>x.colors.primary500};
  }

  &:active {
    color: ${({theme:x})=>x.colors.primary700};
  }

  ${r.BF};
`,O=(0,p.default)(c.x)`
  display: flex;
`,P=l.forwardRef(({children:x,href:M,to:K,disabled:R=!1,startIcon:D,endIcon:T,...W},F)=>{const G=M?"_blank":void 0,Y=M?"noreferrer noopener":void 0;return(0,n.jsxs)(v,{as:K&&!R?u.OL:"a",target:G,rel:Y,to:R?void 0:K,href:R?"#":M,disabled:R,ref:F,...W,children:[D&&(0,n.jsx)(O,{as:"span","aria-hidden":!0,paddingRight:2,children:D}),(0,n.jsx)(d.Z,{children:x}),T&&!M&&(0,n.jsx)(O,{as:"span","aria-hidden":!0,paddingLeft:2,children:T}),M&&(0,n.jsx)(O,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,n.jsx)(g.Z,{})})]})})},86353:(y,j,t)=>{"use strict";t.d(j,{m:()=>r});var n=t(74081),l=t(14094),g=t(90529);const u=`${232/16}rem`,p=(0,l.default)(g.r)`
  width: ${u};
  background: ${({theme:d})=>d.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:d})=>d.colors.neutral200};
  z-index: 1;
`,r=({ariaLabel:d,...c})=>(0,n.jsx)(p,{"aria-label":d,as:"nav",...c})},30734:(y,j,t)=>{"use strict";t.d(j,{p:()=>D});var n=t(74081),l=t(27279),g=t(89577),u=t(14094),p=t(98824),r=t(21837);const d=T=>{const W=(0,l.useRef)();return(0,l.useEffect)(()=>{W.current=T}),W.current};var c=t(67393),v=t(52185),O=t(56791),P=t(92856),x=t(85898),M=t(78565),K=t(2667);const R=(0,u.default)(c.i)`
  width: ${24/16}rem;
  background-color: ${({theme:T})=>T.colors.neutral200};
`,D=({as:T="h2",label:W,searchLabel:F="",searchable:G=!1,onChange:Y=()=>{},value:k="",onClear:ot=()=>{},onSubmit:J=()=>{},id:et})=>{const[_,at]=(0,l.useState)(!1),it=d(_),mt=(0,r.M)(et),b=(0,l.useRef)(void 0),V=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{_&&b.current&&b.current.focus(),it&&!_&&V.current&&V.current.focus()},[_,it]);const gt=()=>{at(Q=>!Q)},pt=Q=>{ot(Q),b.current.focus()},ht=Q=>{Q.relatedTarget?.id!==mt&&at(!1)},Et=Q=>{Q.key===p.y.ESCAPE&&at(!1)};return _?(0,n.jsxs)(v.x,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,n.jsx)(O.U,{children:(0,n.jsx)(P.w,{name:"searchbar",value:k,onChange:Y,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:Et,ref:b,onBlur:ht,onClear:pt,onSubmit:J,clearLabel:"Clear",size:"S",children:F})}),(0,n.jsx)(v.x,{paddingLeft:2,paddingTop:4,children:(0,n.jsx)(R,{})})]}):(0,n.jsxs)(v.x,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,n.jsxs)(x.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(M.Z,{variant:"beta",as:T,children:W}),G&&(0,n.jsx)(K.h,{ref:V,onClick:gt,label:F,icon:(0,n.jsx)(g.Z,{})})]}),(0,n.jsx)(v.x,{paddingTop:4,children:(0,n.jsx)(R,{})})]})}},38433:(y,j,t)=>{"use strict";t.d(j,{E:()=>x});var n=t(74081),l=t(27279),g=t(1939),u=t(14094),p=t(52185),r=t(78565),d=t(85898),c=t(6719);const v=(0,u.default)(p.x)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:M})=>M.colors.neutral800};
  svg > * {
    fill: ${({theme:M})=>M.colors.neutral600};
  }

  &.active {
    ${({theme:M})=>`
      background-color: ${M.colors.primary100};
      border-right: 2px solid ${M.colors.primary600};
      svg > * {
        fill: ${M.colors.primary700};
      }
      ${r.Z} {
        color: ${M.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,O=(0,u.default)(g.Z)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:M,$active:K})=>K?M.colors.primary600:M.colors.neutral600};
  }
`,P=u.default.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,x=l.forwardRef(({children:M,icon:K=null,withBullet:R=!1,as:D=c.f,isSubSectionChild:T=!1,...W},F)=>(0,n.jsxs)(v,{as:D,icon:K,background:"neutral100",paddingLeft:T?9:7,paddingBottom:2,paddingTop:2,ref:F,...W,children:[(0,n.jsxs)(d.k,{children:[K?(0,n.jsx)(P,{children:K}):(0,n.jsx)(O,{}),(0,n.jsx)(p.x,{paddingLeft:2,children:(0,n.jsx)(r.Z,{as:"span",children:M})})]}),R&&(0,n.jsx)(p.x,{as:d.k,paddingRight:4,children:(0,n.jsx)(O,{$active:!0})})]}))},63490:(y,j,t)=>{"use strict";t.d(j,{D:()=>K});var n=t(74081),l=t(27279),g=t(14094),u=t(3494),p=t(85898),r=t(52185),d=t(78565);const c=(0,g.default)(p.k)`
  border: none;
  padding: 0;
  background: transparent;
`,v=g.default.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:R})=>R?"0deg":"180deg"});
`,O=({collapsable:R=!1,label:D,onClick:T=()=>{},ariaExpanded:W,ariaControls:F})=>R?(0,n.jsxs)(c,{as:"button",onClick:T,"aria-expanded":W,"aria-controls":F,textAlign:"left",children:[(0,n.jsx)(r.x,{paddingRight:1,children:(0,n.jsx)(d.Z,{variant:"sigma",textColor:"neutral600",children:D})}),R&&(0,n.jsx)(v,{rotated:W,children:(0,n.jsx)(u.Z,{"aria-hidden":!0})})]}):(0,n.jsx)(c,{children:(0,n.jsx)(r.x,{paddingRight:1,children:(0,n.jsx)(d.Z,{variant:"sigma",textColor:"neutral600",children:D})})});var P=t(21837),x=t(31348);const M=(0,g.default)(r.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:R})=>R.colors.neutral500};
    }
  }
`,K=({collapsable:R=!1,label:D,badgeLabel:T,children:W,id:F})=>{const[G,Y]=(0,l.useState)(!0),k=(0,P.M)(F),ot=()=>{Y(J=>!J)};return(0,n.jsxs)(p.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,n.jsx)(M,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,n.jsxs)(r.x,{position:"relative",paddingRight:T?6:0,children:[(0,n.jsx)(O,{onClick:ot,ariaExpanded:G,ariaControls:k,collapsable:R,label:D}),T&&(0,n.jsx)(x.C,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:T})]})}),(!R||G)&&(0,n.jsx)("ol",{id:k,children:l.Children.map(W,(J,et)=>(0,n.jsx)("li",{children:J},et))})]})}},2239:(y,j,t)=>{"use strict";t.d(j,{Z:()=>p});var n=t(74081),l=t(27279),g=t(52185),u=t(85898);const p=({children:r,spacing:d=2,horizontal:c=!1,...v})=>(0,n.jsx)(g.x,{paddingTop:2,paddingBottom:4,children:(0,n.jsx)(u.k,{as:"ol",gap:d,direction:c?"row":"column",alignItems:c?"center":"stretch",...v,children:l.Children.map(r,(O,P)=>(0,n.jsx)("li",{children:O},P))})})}}]);
